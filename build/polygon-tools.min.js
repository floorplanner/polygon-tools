window.polygon_tools_version="0.3.8",window.polygon_tools_rev="c3ee335",function t(n,e,r){function a(o,u){if(!e[o]){if(!n[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[o]={exports:{}};n[o][0].call(l.exports,function(t){var e=n[o][1][t];return a(e||t)},l,l.exports,t,n,e,r)}return e[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,n,e){"use strict";function r(t,n){return t.b===n.b&&t.a===n.a}function a(t,n){return t.b<n.b||t.b===n.b&&t.a<=n.a}function i(t,n,e){var r=n.b-t.b,a=e.b-n.b;return 0<r+a?r<a?n.a-t.a+r/(r+a)*(t.a-e.a):n.a-e.a+a/(r+a)*(e.a-t.a):0}function o(t,n,e){var r=n.b-t.b,a=e.b-n.b;return 0<r+a?(n.a-e.a)*r+(n.a-t.a)*a:0}function u(t,n){return t.a<n.a||t.a===n.a&&t.b<=n.b}function s(t,n,e){var r=n.a-t.a,a=e.a-n.a;return 0<r+a?r<a?n.b-t.b+r/(r+a)*(t.b-e.b):n.b-e.b+a/(r+a)*(e.b-t.b):0}function c(t,n,e){var r=n.a-t.a,a=e.a-n.a;return 0<r+a?(n.b-e.b)*r+(n.b-t.b)*a:0}function l(t){return a(t.b.a,t.a)}function b(t){return a(t.a,t.b.a)}function f(t,n,e,r){return t=0>t?0:t,e=0>e?0:e,t<=e?0===e?(n+r)/2:n+t/(t+e)*(r-n):r+e/(t+e)*(n-r)}function h(t){var n=y(t.b);return T(n,t.c),T(n.b,t.c),p(n,t.a),n}function _(t,n){var e=!1,r=!1;t!==n&&(n.a!==t.a&&(r=!0,G(n.a,t.a)),n.d!==t.d&&(e=!0,S(n.d,t.d)),g(n,t),r||(T(n,t.a),t.a.c=t),e||(p(n,t.d),t.d.a=t))}function d(t){var n=t.b,e=!1;t.d!==t.b.d&&(e=!0,S(t.d,t.b.d)),t.c===t?G(t.a,null):(t.b.d.a=J(t),t.a.c=t.c,g(t,J(t)),e||p(t,t.d)),n.c===n?(G(n.a,null),S(n.d,null)):(t.d.a=J(n),n.a.c=n.c,g(n,J(n))),N(t)}function v(t){var n=y(t),e=n.b;return g(n,t.e),n.a=t.b.a,T(e,n.a),n.d=e.d=t.d,n=n.b,g(t.b,J(t.b)),g(t.b,n),t.b.a=n.a,n.b.a.c=n.b,n.b.d=t.b.d,n.f=t.f,n.b.f=t.b.f,n}function E(t,n){var e=!1,r=y(t),a=r.b;return n.d!==t.d&&(e=!0,S(n.d,t.d)),g(r,t.e),g(a,n),r.a=t.b.a,a.a=n.a,r.d=a.d=t.d,t.d.a=a,e||p(r,t.d),r}function y(t){var n=new H,e=new H,r=t.b.h;return e.h=r,r.b.h=n,n.h=t,t.b.h=e,n.b=e,n.c=n,n.e=e,e.b=n,e.c=e,e.e=n}function g(t,n){var e=t.c,r=n.c;e.b.e=n,r.b.e=t,t.c=r,n.c=e}function T(t,n){var e=n.f,r=new tt(n,e);e.e=r,n.f=r,e=r.c=t;do{e.a=r,e=e.c}while(e!==t)}function p(t,n){var e=n.d,r=new K(n,e);e.b=r,n.d=r,r.a=t,r.c=n.c,e=t;do{e.d=r,e=e.e}while(e!==t)}function N(t){var n=t.h;t=t.b.h,n.b.h=t,t.b.h=n}function G(t,n){var e=t.c,r=e;do{r.a=n,r=r.c}while(r!==e);e=t.f,r=t.e,r.f=e,e.e=r}function S(t,n){var e=t.a,r=e;do{r.d=n,r=r.e}while(r!==e);e=t.d,r=t.b,r.d=e,e.b=r}function I(t){var n=0;return Math.abs(t[1])>Math.abs(t[0])&&(n=1),Math.abs(t[2])>Math.abs(t[n])&&(n=2),n}function L(t,n){t.f+=n.f,t.b.f+=n.b.f}function w(t,n,e){return t=t.a,n=n.a,e=e.a,n.b.a===t?e.b.a===t?a(n.a,e.a)?0>=o(e.b.a,n.a,e.a):0<=o(n.b.a,e.a,n.a):0>=o(e.b.a,t,e.a):e.b.a===t?0<=o(n.b.a,t,n.a):(n=i(n.b.a,t,n.a),t=i(e.b.a,t,e.a),n>=t)}function O(t){t.a.i=null;var n=t.e;n.a.c=n.c,n.c.a=n.a,t.e=null}function A(t,n){d(t.a),t.c=!1,t.a=n,n.i=t}function U(t){var n=t.a.a;do{t=_t(t)}while(t.a.a===n);return t.c&&(n=E(ht(t).a.b,t.a.e),A(t,n),t=_t(t)),t}function m(t,n,e){var r=new ft;return r.a=e,r.e=z(t.f,n.e,r),e.i=r}function D(t,n){switch(t.s){case 100130:return 0!=(1&n);case 100131:return 0!==n;case 100132:return 0<n;case 100133:return 0>n;case 100134:return 2<=n||-2>=n}return!1}function R(t){var n=t.a,e=n.d;e.c=t.d,e.a=n,O(t)}function M(t,n,e){for(t=n,n=n.a;t!==e;){t.c=!1;var r=ht(t),a=r.a;if(a.a!==n.a){if(!r.c){R(t);break}a=E(n.c.b,a.b),A(r,a)}n.c!==a&&(_(J(a),a),_(n,a)),R(t),n=r.a,t=r}return n}function k(t,n,e,r,a,i){var o=!0;do{m(t,n,e.b),e=e.c}while(e!==r);for(null===a&&(a=ht(n).a.b.c);r=ht(n),e=r.a.b,e.a===a.a;)e.c!==a&&(_(J(e),e),_(J(a),e)),r.f=n.f-e.f,r.d=D(t,r.f),n.b=!0,!o&&C(t,n)&&(L(e,a),O(n),d(a)),o=!1,n=r,a=e;n.b=!0,i&&j(t,n)}function W(t,n,e,r,a){var i=[n.g[0],n.g[1],n.g[2]];n.d=null,n.d=t.o?t.o(i,e,r,t.c)||null:null,null===n.d&&(a?t.n||(Z(t,100156),t.n=!0):n.d=e[0])}function P(t,n,e){var r=[null,null,null,null];r[0]=n.a.d,r[1]=e.a.d,W(t,n.a,r,[.5,.5,0,0],!1),_(n,e)}function x(t,n,e,r,a){var i=Math.abs(n.b-t.b)+Math.abs(n.a-t.a),o=Math.abs(e.b-t.b)+Math.abs(e.a-t.a),u=a+1;r[a]=.5*o/(i+o),r[u]=.5*i/(i+o),t.g[0]+=r[a]*n.g[0]+r[u]*e.g[0],t.g[1]+=r[a]*n.g[1]+r[u]*e.g[1],t.g[2]+=r[a]*n.g[2]+r[u]*e.g[2]}function C(t,n){var e=ht(n),i=n.a,u=e.a;if(a(i.a,u.a)){if(0<o(u.b.a,i.a,u.a))return!1;if(r(i.a,u.a)){if(i.a!==u.a){var e=t.e,s=i.a.h;if(0<=s){var e=e.b,c=e.d,l=e.e,b=e.c,f=b[s];c[f]=c[e.a],b[c[f]]=f,f<=--e.a&&(1>=f?lt(e,f):a(l[c[f>>1]],l[c[f]])?lt(e,f):bt(e,f)),l[s]=null,b[s]=e.b,e.b=s}else for(e.c[-(s+1)]=null;0<e.a&&null===e.c[e.d[e.a-1]];)--e.a;P(t,J(u),i)}}else v(u.b),_(i,J(u)),n.b=e.b=!0}else{if(0>o(i.b.a,u.a,i.a))return!1;_t(n).b=n.b=!0,v(i.b),_(J(u),i)}return!0}function B(t,n){var e=ht(n),l=n.a,b=e.a,h=l.a,d=b.a,E=l.b.a,y=b.b.a,g=new tt;if(o(E,t.a,h),o(y,t.a,d),h===d||Math.min(h.a,E.a)>Math.max(d.a,y.a))return!1;if(a(h,d)){if(0<o(y,h,d))return!1}else if(0>o(E,d,h))return!1;var T,p,N=E,G=h,S=y,I=d;if(a(N,G)||(T=N,N=G,G=T),a(S,I)||(T=S,S=I,I=T),a(N,S)||(T=N,N=S,S=T,T=G,G=I,I=T),a(S,G)?a(G,I)?(T=i(N,S,G),p=i(S,G,I),0>T+p&&(T=-T,p=-p),g.b=f(T,S.b,p,G.b)):(T=o(N,S,G),p=-o(N,I,G),0>T+p&&(T=-T,p=-p),g.b=f(T,S.b,p,I.b)):g.b=(S.b+G.b)/2,u(N,G)||(T=N,N=G,G=T),u(S,I)||(T=S,S=I,I=T),u(N,S)||(T=N,N=S,S=T,T=G,G=I,I=T),u(S,G)?u(G,I)?(T=s(N,S,G),p=s(S,G,I),0>T+p&&(T=-T,p=-p),g.a=f(T,S.a,p,G.a)):(T=c(N,S,G),p=-c(N,I,G),0>T+p&&(T=-T,p=-p),g.a=f(T,S.a,p,I.a)):g.a=(S.a+G.a)/2,a(g,t.a)&&(g.b=t.a.b,g.a=t.a.a),N=a(h,d)?h:d,a(N,g)&&(g.b=N.b,g.a=N.a),r(g,h)||r(g,d))return C(t,n),!1;if(!r(E,t.a)&&0<=o(E,t.a,g)||!r(y,t.a)&&0>=o(y,t.a,g)){if(y===t.a)return v(l.b),_(b.b,l),n=U(n),l=ht(n).a,M(t,ht(n),e),k(t,n,J(l),l,l,!0),!0;if(E===t.a){v(b.b),_(l.e,J(b)),h=e=n,d=h.a.b.a;do{h=_t(h)}while(h.a.b.a===d);return n=h,h=ht(n).a.b.c,e.a=J(b),b=M(t,e,null),k(t,n,b.c,l.b.c,h,!0),!0}return 0<=o(E,t.a,g)&&(_t(n).b=n.b=!0,v(l.b),l.a.b=t.a.b,l.a.a=t.a.a),0>=o(y,t.a,g)&&(n.b=e.b=!0,v(b.b),b.a.b=t.a.b,b.a.a=t.a.a),!1}return v(l.b),v(b.b),_(J(b),l),l.a.b=g.b,l.a.a=g.a,l.a.h=rt(t.e,l.a),l=l.a,b=[0,0,0,0],g=[h.d,E.d,d.d,y.d],l.g[0]=l.g[1]=l.g[2]=0,x(l,h,E,b,0),x(l,d,y,b,2),W(t,l,g,b,!0),_t(n).b=n.b=e.b=!0,!1}function j(t,n){for(var e=ht(n);;){for(;e.b;)n=e,e=ht(e);if(!n.b&&(e=n,null===(n=_t(n))||!n.b))break;n.b=!1;var r,i=n.a,u=e.a;if(r=i.b.a!==u.b.a)t:{r=n;var s=ht(r),c=r.a,l=s.a,b=void 0;if(a(c.b.a,l.b.a)){if(0>o(c.b.a,l.b.a,c.a)){r=!1;break t}_t(r).b=r.b=!0,b=v(c),_(l.b,b),b.d.c=r.d}else{if(0<o(l.b.a,c.b.a,l.a)){r=!1;break t}r.b=s.b=!0,b=v(l),_(c.e,l.b),b.b.d.c=r.d}r=!0}if(r&&(e.c?(O(e),d(u),e=ht(n),u=e.a):n.c&&(O(n),d(i),n=_t(e),i=n.a)),i.a!==u.a)if(i.b.a===u.b.a||n.c||e.c||i.b.a!==t.a&&u.b.a!==t.a)C(t,n);else if(B(t,n))break;i.a===u.a&&i.b.a===u.b.a&&(L(u,i),O(n),d(i),n=_t(e))}}function V(t,n){t.a=n;for(var e=n.c;null===e.i;)if((e=e.c)===n.c){var e=t,i=n,u=new ft;u.a=i.c.b;var s=e.f,c=s.a;do{c=c.a}while(null!==c.b&&!s.c(s.b,u,c.b));var s=c.b,l=ht(s),u=s.a,c=l.a;if(0===o(u.b.a,i,u.a))u=s.a,r(u.a,i)||r(u.b.a,i)||(v(u.b),s.c&&(d(u.c),s.c=!1),_(i.c,u),V(e,i));else{var b=a(c.b.a,u.b.a)?s:l,l=void 0;s.d||b.c?(l=b===s?E(i.c.b,u.e):E(c.b.c.b,i.c).b,b.c?A(b,l):(u=e,s=m(e,s,l),s.f=_t(s).f+s.a.f,s.d=D(u,s.f)),V(e,i)):k(e,s,i.c,i.c,null,!0)}return}if(e=U(e.i),u=ht(e),s=u.a,u=M(t,u,null),u.c===s){var s=u,u=s.c,c=ht(e),l=e.a,b=c.a,f=!1;l.b.a!==b.b.a&&B(t,e),r(l.a,t.a)&&(_(J(u),l),e=U(e),u=ht(e).a,M(t,ht(e),c),f=!0),r(b.a,t.a)&&(_(s,J(b)),s=M(t,c,null),f=!0),f?k(t,e,s.c,u,u,!0):(i=a(b.a,l.a)?J(b):l,i=E(s.c.b,i),k(t,e,i,i.c,i.c,!1),i.b.i.c=!0,j(t,e))}else k(t,e,u.c,s,s,!0)}function F(t,n){var e=new ft,r=h(t.b);r.a.b=vt,r.a.a=n,r.b.a.b=-vt,r.b.a.a=n,t.a=r.b.a,e.a=r,e.f=0,e.d=!1,e.c=!1,e.h=!0,e.b=!1,r=t.f,r=z(r,r.a,e),e.e=r}function q(t){this.a=new X,this.b=t,this.c=w}function z(t,n,e){do{n=n.c}while(null!==n.b&&!t.c(t.b,n.b,e));return t=new X(e,n.a,n),n.a.c=t,n.a=t}function X(t,n,e){this.b=t||null,this.a=n||this,this.c=e||this}function Y(){this.d=Et,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Q(t,n){if(t.d!==n)for(;t.d!==n;)if(t.d<n)switch(t.d){case Et:Z(t,100151),t.u(null);break;case 1:Z(t,100152),t.t()}else switch(t.d){case 2:Z(t,100154),t.v();break;case 1:Z(t,100153),t.w()}}function Z(t,n){t.p&&t.p(n,t.c)}function K(t,n){this.b=t||this,this.d=n||this,this.a=null,this.c=!1}function H(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function J(t){return t.b.e}function $(){this.c=new tt,this.a=new K,this.b=new H,this.d=new H,this.b.b=this.d,this.d.b=this.b}function tt(t,n){this.e=t||this,this.f=n||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function nt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new it}function et(t){t.d=[];for(var n=0;n<t.a;n++)t.d[n]=n;t.d.sort(function(t){return function(n,e){return a(t[n],t[e])?1:-1}}(t.c)),t.e=!0,ut(t.b)}function rt(t,n){if(t.e){var e=t.b,r=++e.a;2*r>e.f&&(e.f*=2,e.c=ot(e.c,e.f+1));var a;return 0===e.b?a=r:(a=e.b,e.b=e.c[e.b]),e.e[a]=n,e.c[a]=r,e.d[r]=a,e.h&&bt(e,r),a}return e=t.a++,t.c[e]=n,-(e+1)}function at(t){if(0===t.a)return ct(t.b);var n=t.c[t.d[t.a-1]];if(0!==t.b.a&&a(st(t.b),n))return ct(t.b);do{--t.a}while(0<t.a&&null===t.c[t.d[t.a-1]]);return n}function it(){this.d=ot([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ot(t,n){for(var e=Array(n),r=0;r<t.length;r++)e[r]=t[r];for(;r<n;r++)e[r]=0;return e}function ut(t){for(var n=t.a;1<=n;--n)lt(t,n);t.h=!0}function st(t){return t.e[t.d[1]]}function ct(t){var n=t.d,e=t.e,r=t.c,a=n[1],i=e[a];return 0<t.a&&(n[1]=n[t.a],r[n[1]]=1,e[a]=null,r[a]=t.b,t.b=a,0<--t.a&&lt(t,1)),i}function lt(t,n){for(var e=t.d,r=t.e,i=t.c,o=n,u=e[o];;){var s=o<<1;s<t.a&&a(r[e[s+1]],r[e[s]])&&(s+=1);var c=e[s];if(s>t.a||a(r[u],r[c])){e[o]=u,i[u]=o;break}e[o]=c,i[c]=o,o=s}}function bt(t,n){for(var e=t.d,r=t.e,i=t.c,o=n,u=e[o];;){var s=o>>1,c=e[s];if(0===s||a(r[c],r[u])){e[o]=u,i[u]=o;break}e[o]=c,i[c]=o,o=s}}function ft(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ht(t){return t.e.c.b}function _t(t){return t.e.a.b}var dt,vt=4e150,Et=0;dt=Y.prototype,dt.x=function(){Q(this,Et)},dt.B=function(t,n){switch(t){case 100142:return;case 100140:switch(n){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=n)}break;case 100141:return void(this.m=!!n);default:return void Z(this,100900)}Z(this,100901)},dt.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Z(this,100900)}return!1},dt.A=function(t,n,e){this.j[0]=t,this.j[1]=n,this.j[2]=e},dt.z=function(t,n){var e=n||null;switch(t){case 100100:case 100106:this.h=e;break;case 100104:case 100110:this.l=e;break;case 100101:case 100107:this.k=e;break;case 100102:case 100108:this.i=e;break;case 100103:case 100109:this.p=e;break;case 100105:case 100111:this.o=e;break;case 100112:this.r=e;break;default:Z(this,100900)}},dt.C=function(t,n){var e=!1,r=[0,0,0];Q(this,2);for(var a=0;3>a;++a){var i=t[a];-1e150>i&&(i=-1e150,e=!0),1e150<i&&(i=1e150,e=!0),r[a]=i}e&&Z(this,100155),e=this.q,null===e?(e=h(this.b),_(e,e.b)):(v(e),e=e.e),e.a.d=n,e.a.g[0]=r[0],e.a.g[1]=r[1],e.a.g[2]=r[2],e.f=1,e.b.f=-1,this.q=e},dt.u=function(t){Q(this,Et),this.d=1,this.b=new $,this.c=t},dt.t=function(){Q(this,1),this.d=2,this.q=null},dt.v=function(){Q(this,2),this.d=1},dt.w=function(){Q(this,1),this.d=Et;var t=this.j[0],n=this.j[1],e=this.j[2],i=!1,u=[t,n,e];if(0===t&&0===n&&0===e){for(var n=[-2e150,-2e150,-2e150],s=[2e150,2e150,2e150],e=[],c=[],i=this.b.c,t=i.e;t!==i;t=t.e)for(var f=0;3>f;++f){var h=t.g[f];h<s[f]&&(s[f]=h,c[f]=t),h>n[f]&&(n[f]=h,e[f]=t)}if(t=0,n[1]-s[1]>n[0]-s[0]&&(t=1),n[2]-s[2]>n[t]-s[t]&&(t=2),s[t]>=n[t])u[0]=0,u[1]=0,u[2]=1;else{for(n=0,s=c[t],e=e[t],c=[0,0,0],s=[s.g[0]-e.g[0],s.g[1]-e.g[1],s.g[2]-e.g[2]],f=[0,0,0],t=i.e;t!==i;t=t.e)f[0]=t.g[0]-e.g[0],f[1]=t.g[1]-e.g[1],f[2]=t.g[2]-e.g[2],c[0]=s[1]*f[2]-s[2]*f[1],c[1]=s[2]*f[0]-s[0]*f[2],c[2]=s[0]*f[1]-s[1]*f[0],(h=c[0]*c[0]+c[1]*c[1]+c[2]*c[2])>n&&(n=h,u[0]=c[0],u[1]=c[1],u[2]=c[2]);0>=n&&(u[0]=u[1]=u[2]=0,u[I(s)]=1)}i=!0}for(c=I(u),t=this.b.c,n=(c+1)%3,e=(c+2)%3,c=0<u[c]?1:-1,u=t.e;u!==t;u=u.e)u.b=u.g[n],u.a=c*u.g[e];if(i){for(u=0,i=this.b.a,t=i.b;t!==i;t=t.b)if(n=t.a,!(0>=n.f))do{u+=(n.a.b-n.b.a.b)*(n.a.a+n.b.a.a),n=n.e}while(n!==t.a);if(0>u)for(u=this.b.c,i=u.e;i!==u;i=i.e)i.a=-i.a}for(this.n=!1,u=this.b.b,t=u.h;t!==u;t=i)i=t.h,n=t.e,r(t.a,t.b.a)&&t.e.e!==t&&(P(this,n,t),d(t),t=n,n=t.e),n.e===t&&(n!==t&&(n!==i&&n!==i.b||(i=i.h),d(n)),t!==i&&t!==i.b||(i=i.h),d(t));for(this.e=u=new nt,i=this.b.c,t=i.e;t!==i;t=t.e)t.h=rt(u,t);for(et(u),this.f=new q(this),F(this,-vt),F(this,vt);null!==(u=at(this.e));){for(;;){t:if(t=this.e,0===t.a)i=st(t.b);else if(i=t.c[t.d[t.a-1]],0!==t.b.a&&(t=st(t.b),a(t,i))){i=t;break t}if(null===i||!r(i,u))break;i=at(this.e),P(this,u.c,i.c)}V(this,u)}for(this.a=this.f.a.a.b.a.a,u=0;null!==(i=this.f.a.a.b);)i.h||++u,O(i);for(this.f=null,u=this.e,u.b=null,u.d=null,this.e=u.c=null,u=this.b,t=u.a.b;t!==u.a;t=i)i=t.b,t=t.a,t.e.e===t&&(L(t.c,t),d(t));if(!this.n){if(u=this.b,this.m)for(t=u.b.h;t!==u.b;t=i)i=t.h,t.b.d.c!==t.d.c?t.f=t.d.c?1:-1:d(t);else for(t=u.a.b;t!==u.a;t=i)if(i=t.b,t.c){for(t=t.a;a(t.b.a,t.a);t=t.c.b);for(;a(t.a,t.b.a);t=t.e);for(n=t.c.b,e=void 0;t.e!==n;)if(a(t.b.a,n.a)){for(;n.e!==t&&(l(n.e)||0>=o(n.a,n.b.a,n.e.b.a));)e=E(n.e,n),n=e.b;n=n.c.b}else{for(;n.e!==t&&(b(t.c.b)||0<=o(t.b.a,t.a,t.c.b.a));)e=E(t,t.c.b),t=e.b;t=t.e}for(;n.e.e!==t;)e=E(n.e,n),n=e.b}if(this.h||this.i||this.k||this.l)if(this.m){for(u=this.b,i=u.a.b;i!==u.a;i=i.b)if(i.c){this.h&&this.h(2,this.c),t=i.a;do{this.k&&this.k(t.a.d,this.c),t=t.e}while(t!==i.a);this.i&&this.i(this.c)}}else{for(u=this.b,i=!!this.l,t=!1,n=-1,e=u.a.d;e!==u.a;e=e.d)if(e.c){t||(this.h&&this.h(4,this.c),t=!0),c=e.a;do{i&&(s=c.b.d.c?0:1,n!==s&&(n=s,this.l&&this.l(!!n,this.c))),this.k&&this.k(c.a.d,this.c),c=c.e}while(c!==e.a)}t&&this.i&&this.i(this.c)}if(this.r){for(u=this.b,t=u.a.b;t!==u.a;t=i)if(i=t.b,!t.c){n=t.a,e=n.e,c=void 0;do{c=e,e=c.e,c.d=null,null===c.b.d&&(c.c===c?G(c.a,null):(c.a.c=c.c,g(c,J(c))),s=c.b,s.c===s?G(s.a,null):(s.a.c=s.c,g(s,J(s))),N(c))}while(c!==n);n=t.d,t=t.b,t.d=n,n.b=t}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Y,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Y.prototype.gluDeleteTess=Y.prototype.x,Y.prototype.gluTessProperty=Y.prototype.B,Y.prototype.gluGetTessProperty=Y.prototype.y,Y.prototype.gluTessNormal=Y.prototype.A,Y.prototype.gluTessCallback=Y.prototype.z,Y.prototype.gluTessVertex=Y.prototype.C,Y.prototype.gluTessBeginPolygon=Y.prototype.u,Y.prototype.gluTessBeginContour=Y.prototype.t,Y.prototype.gluTessEndContour=Y.prototype.v,Y.prototype.gluTessEndPolygon=Y.prototype.w,void 0!==n&&(n.exports=this.libtess)},{}],2:[function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}Object.defineProperty(e,"__esModule",{value:!0}),e.tesselator=e.polygon=void 0;var a=t("./tesselator"),i=r(a),o=t("./polygon"),u=r(o);e.polygon=u,e.tesselator=i;void 0!==window&&(window.PolygonTools={polygon:u,tesselator:i,version:window.polygon_tools_version||"",build:window.polygon_tools_rev||""})},{"./polygon":3,"./tesselator":4}],3:[function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}function a(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(n[1]-t[1])}function i(t){if(t.length<3)return null;var n=t.map(function(t){return t.length>=3?t:[t[0],t[1],0]}),e=g(n,3),r=e[0],a=e[1],i=e[2],o=G.subtract(a,r),u=G.subtract(i,r),s=G.normalize(G.cross(o,u));if(!s.some(function(t){return isNaN(t)}))return s;if(3===t.length)return null;var c=[0,0,0];return n.forEach(function(e,r){var a=n[(r+1)%t.length];c[0]=c[0]+(e[1]-a[1])*(e[2]+a[2]),c[1]=c[1]+(e[2]-a[2])*(e[0]+a[0]),c[2]=c[2]+(e[0]-a[0])*(e[1]+a[1])}),c=G.normalize(c),c.some(function(t){return isNaN(c)})?null:c}function o(t){return t.reduce(function(n,e,r){var a=t[r+1]||t[0];return n+e[0]*a[1]-a[0]*e[1]},0)/2}function u(t){var n=t.reduce(function(n,e,r){var a=g(n,2),i=a[0],o=a[1],u=t[r+1]||t[0],s=e[0]*u[1]-u[0]*e[1];return[i+(e[0]+u[0])*s,o+(e[1]+u[1])*s]},[0,0]),e=g(n,2),r=e[0],a=e[1],i=o(t);return 0!==r&&(r/=6*Math.abs(i)),0!==a&&(a/=6*Math.abs(i)),i<0&&(r=-r,a=-a),[r,a]}function s(t){return o(t)>0}function c(t){return o(t)<0}function l(t){var n=o(t);return n<0?L:n>0?I:S}function b(t){var n=[Number.MAX_VALUE,Number.MAX_VALUE],e=[-Number.MAX_VALUE,-Number.MAX_VALUE];return t.forEach(function(t){for(var r=0;r<Math.min(3,t.length);++r)n[r]=Math.min(n[r],t[r]),e[r]=Math.max(e[r],t[r])}),{xMin:n[0],yMin:n[1],xMax:e[0],yMax:e[1]}}function f(t){return s(t)&&t.reverse(),t}function h(t){return c(t)&&t.reverse(),t}function _(t){for(var n=[],e=0;e<t.length;e+=3)n.push([t[e],t[e+1],t[e+2]]);return n}function d(t,n){if(!t||t.length<3||!n||n.length<1)return t;var e=b(t);if(n=n.filter(function(t){var n=b(t);return!(n.xMin>e.xMax||n.yMin>e.yMax||n.xMax<e.xMin||n.yMax<e.yMin)}),0===n.length)return t;var r={polygons:[t],holes:n};return p.run(r).map(_).reduce(function(t,n){return t.concat(n)},[])}function v(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r={polygons:[h(n[0])],holes:n.slice(1).map(function(t){return f(t)}),boundaryOnly:!0,autoWinding:!1};return p.run(r)}function E(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r={polygons:n.map(function(t){return h(t)}),boundaryOnly:!0,autoWinding:!1};return p.run(r)}function y(t,n){var e={polygons:[h(t),h(n)],boundaryOnly:!0,windingRule:p.GLU_TESS_WINDING_ABS_GEQ_TWO,autoWinding:!1};return p.run(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.WINDING_CW=e.WINDING_CCW=e.WINDING_UNKNOWN=void 0;var g=function(){function t(t,n){var e=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.ccw=a,e.normal=i,e.area=o,e.centroid=u,e.is_ccw=s,e.is_cw=c,e.winding=l,e.bounds=b,e.ensure_cw=f,e.ensure_ccw=h,e.triangulate=d,e.subtract=v,e.union=E,e.intersection=y;var T=t("./tesselator"),p=r(T),N=t("./vec"),G=r(N),S=e.WINDING_UNKNOWN=0,I=e.WINDING_CCW=1,L=e.WINDING_CW=2},{"./tesselator":4,"./vec":5}],4:[function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function a(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new p(t.vertexSize).run(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Tesselator=e.DEFAULT_OPTIONS=e.GLU_TESS_WINDING_ABS_GEQ_TWO=e.GLU_TESS_WINDING_NEGATIVE=e.GLU_TESS_WINDING_POSITIVE=e.GLU_TESS_WINDING_NONZERO=e.GLU_TESS_WINDING_ODD=e.GL_TRIANGLE_FAN=e.GL_TRIANGLE_STRIP=e.GL_TRIANGLES=e.GL_LINE_LOOP=void 0;var u=function(){function t(t,n){var e=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();e.run=o;var c=t("libtess"),l=t("./polygon"),b=c.primitiveType.GL_LINE_LOOP,f=c.primitiveType.GL_TRIANGLES,h=c.primitiveType.GL_TRIANGLE_STRIP,_=c.primitiveType.GL_TRIANGLE_FAN;e.GL_LINE_LOOP=b,e.GL_TRIANGLES=f,e.GL_TRIANGLE_STRIP=h,e.GL_TRIANGLE_FAN=_;var d=c.windingRule.GLU_TESS_WINDING_ODD,v=c.windingRule.GLU_TESS_WINDING_NONZERO,E=c.windingRule.GLU_TESS_WINDING_POSITIVE,y=c.windingRule.GLU_TESS_WINDING_NEGATIVE,g=c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO;e.GLU_TESS_WINDING_ODD=d,e.GLU_TESS_WINDING_NONZERO=v,e.GLU_TESS_WINDING_POSITIVE=E,e.GLU_TESS_WINDING_NEGATIVE=y,e.GLU_TESS_WINDING_ABS_GEQ_TWO=g;var T=e.DEFAULT_OPTIONS={polygons:[],holes:[],windingRule:E,boundaryOnly:!1,normal:null,autoWinding:!0},p=e.Tesselator=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;r(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._vsize=t,e._current=[],e._out=[],e._primitiveType=0,e.gluTessCallback(c.gluEnum.GLU_TESS_VERTEX_DATA,e._vertex),e.gluTessCallback(c.gluEnum.GLU_TESS_BEGIN,e._begin),e.gluTessCallback(c.gluEnum.GLU_TESS_END,e._end),e.gluTessCallback(c.gluEnum.GLU_TESS_ERROR,e._error),e.gluTessCallback(c.gluEnum.GLU_TESS_COMBINE,e._combine),e.gluTessCallback(c.gluEnum.GLU_TESS_EDGE_FLAG,e._edge),e}return i(n,t),s(n,[{key:"start",value:function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._current=[],this._out=[],this.gluTessBeginPolygon();var r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;e&&(0,l.is_cw)(s)&&s.reverse(),this.gluTessBeginContour();var c=!0,b=!1,f=void 0;try{for(var h,_=s[Symbol.iterator]();!(c=(h=_.next()).done);c=!0){var d=h.value;this.gluTessVertex(d,d)}}catch(t){b=!0,f=t}finally{try{!c&&_.return&&_.return()}finally{if(b)throw f}}this.gluTessEndContour()}}catch(t){a=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}var v=!0,E=!1,y=void 0;try{for(var g,T=n[Symbol.iterator]();!(v=(g=T.next()).done);v=!0){var p=g.value;e&&(0,l.is_ccw)(p)&&p.reverse(),this.gluTessBeginContour();var N=!0,G=!1,S=void 0;try{for(var I,L=p[Symbol.iterator]();!(N=(I=L.next()).done);N=!0){var w=I.value;this.gluTessVertex(w,w)}}catch(t){G=!0,S=t}finally{try{!N&&L.return&&L.return()}finally{if(G)throw S}}this.gluTessEndContour()}}catch(t){E=!0,y=t}finally{try{!v&&T.return&&T.return()}finally{if(E)throw y}}this.gluTessEndPolygon()}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=Object.assign({},T,t),e=n.polygons,r=n.holes,a=n.autoWinding,i=n.boundaryOnly;if(!e||!e.length)throw new Error("need at least a single polygon");var o=n.normal?n.normal:(0,l.normal)(e[0]),s=u(o,3),b=s[0],f=s[1],h=s[2];return this.gluTessNormal(b,f,h),this.gluTessProperty(c.gluEnum.GLU_TESS_BOUNDARY_ONLY,i),this.gluTessProperty(c.gluEnum.GLU_TESS_WINDING_RULE,n.windingRule),this.start(e,r,a),this._out}},{key:"_begin",value:function(t){this._primitiveType=t,this._current=[]}},{key:"_end_fan",value:function(){for(var t=this._current.shift(),n=this._current.shift();this._current.length;){var e=this._current.shift();this._out.push(t,n,e),n=e}}},{key:"_end_strip",value:function(){for(var t=this._current.shift(),n=this._current.shift();this._current.length;){var e=this._current.shift();this._out.push(t,n,e),t=n,n=e}}},{key:"_end",value:function(){switch(this._primitiveType){case _:this._end_fan();break;case h:this._end_strip();break;case f:case b:default:this._out.push(this._current)}}},{key:"_vertex",value:function(t){this._current.push(t)}},{key:"_edge",value:function(){}},{key:"_error",value:function(t){console.error("error number: "+t)}},{key:"_combine",value:function(t,n,e){for(var r=new Array(this._vsize),a=0;a<this._vsize;++a)r[a]=n[0][a]*e[0]+n[1][a]*e[1]+n[2][a]*e[2]+n[3][a]*e[3];return r}}]),n}(c.GluTesselator)},{"./polygon":3,libtess:1}],5:[function(t,n,e){"use strict";function r(t,n){return t=2===t.length?[t[0],t[1],0]:t,n=2===n.length?[n[0],n[1],0]:n,[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function a(t){return Math.sqrt(t.slice(0,3).reduce(function(t,n,e){return t+n*n},0))}function i(t){var n=a(t);return t.slice(0,3).map(function(t){return t/n})}function o(t,n){return t.slice(0,3).map(function(t,e){return t+n[e]})}function u(t,n){return t.slice(0,3).map(function(t,e){return t-n[e]})}Object.defineProperty(e,"__esModule",{value:!0}),e.cross=r,e.length=a,e.normalize=i,e.add=o,e.subtract=u;e.sub=u},{}]},{},[2]);